{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ajs/./src/js/app.js","webpack://ajs/./src/js/codeFunctions.js"],"sourcesContent":["import { checkCardNumber } from './codeFunctions';\n\nwindow.addEventListener(\"DOMContentLoaded\", function() {\n  createCardsBlock();\n}, false);\n\nlet timeoutId = 0;\n\nfunction createCardsBlock() {\n  const root = document.querySelector('#root');\n  const cardsBlock = getCardsBlock();\n  const cardsBlockHeader = getCardBlockHeader();\n  const cardsSamples = getCardsSamples();\n  const cardsSamplesEntry = getCardsSamplesEntry();\n  const messageBox = getMessageBox();\n\n  cardsBlock.append(cardsBlockHeader);\n  cardsBlock.append(cardsSamples);\n  cardsBlock.append(cardsSamplesEntry);\n  cardsBlock.append(messageBox);\n\n  root.append(cardsBlock);\n\n  addEntringListener();\n  checkCardListener();\n}\n\nfunction getCardsBlock() {\n  const cardsBlock = document.createElement('div');\n  cardsBlock.classList.add('cardsBlock');\n  return cardsBlock || '';\n}\n\nfunction getCardBlockHeader() {\n  const cardsBlockHeader = document.createElement('h4');\n  cardsBlockHeader.classList.add('cardsBlockHeader');\n  cardsBlockHeader.textContent = 'Введите номер вашей карты в поле ниже';\n  return cardsBlockHeader || '';\n}\n\nfunction getCardsSamples() {\n  const cardsSamplesBlock = document.createElement('div');\n  cardsSamplesBlock.classList.add('cardsSamples');\n\n  const cardList = [\n    {system: 'Visa', img: 'https://www.validcreditcardnumber.com/static/img/card-visa.gif'},\n    {system: 'MasterCard', img: 'https://www.validcreditcardnumber.com/static/img/card-mastercard.gif'},\n    {system: 'AmericanExpress', img: 'https://www.validcreditcardnumber.com/static/img/card-amex.gif'},\n    {system: 'DinersClub', img: 'https://www.validcreditcardnumber.com/static/img/card-diners.gif'},\n    {system: 'Discover', img: 'https://www.validcreditcardnumber.com/static/img/card-discover.gif'},\n    {system: 'JCB', img: 'https://www.validcreditcardnumber.com/static/img/card-jcb.gif'},\n    {system: 'MIR', img: './img/card-mir.gif'},\n  ];\n\n  cardList.forEach(el => {\n    const card = document.createElement('div');\n    card.classList.add('cardsSamplesItem');\n    card.classList.add(el.system);\n    const cardImg = document.createElement('img');\n    cardImg.src = el.img;\n    cardImg.title = el.title;\n    card.append(cardImg);\n    cardsSamplesBlock.append(card);\n  });\n\n  return cardsSamplesBlock || '';\n}\n\nfunction getCardsSamplesEntry() {\n  const cardsSamplesEntry = document.createElement('cardsSamplesEntry');\n  cardsSamplesEntry.classList.add('cardsSamplesEntry');\n\n  const cardsSamplesInput = document.createElement('input');\n  cardsSamplesInput.type = 'number';\n  cardsSamplesInput.classList.add('cardsSamplesInput');\n  cardsSamplesInput.name = 'cardsSamplesInput';\n  cardsSamplesInput.placeholder = 'Номер карты';\n\n  const cardsSamplesBtn = document.createElement('button');\n  cardsSamplesBtn.type = 'button';\n  cardsSamplesBtn.classList.add('cardsSamplesBtn');\n  cardsSamplesBtn.textContent = 'Проверить';\n\n  cardsSamplesEntry.append(cardsSamplesInput);\n  cardsSamplesEntry.append(cardsSamplesBtn);\n\n  return cardsSamplesEntry || '';\n}\n\nfunction getMessageBox() {\n  const messageBox = document.createElement('div');\n  messageBox.classList.add('messageBox');\n  return messageBox || '';\n}\n\nfunction addEntringListener() {\n  const input = document.querySelector('.cardsSamplesInput');\n\n  if (input) {\n    input.addEventListener('input', () => {\n      if (input.value.length > 19) {\n        input.value = input.value.substring(0,19);\n      }\n    });\n  }\n}\n\nfunction checkCardListener() {\n  const btn = document.querySelector('.cardsSamplesBtn');\n  const input = document.querySelector('.cardsSamplesInput');\n  const cards = document.querySelectorAll('.cardsSamplesItem');\n\n  if (btn && input) {\n    btn.addEventListener('click', () => {\n      \n      if (cards) {\n        cards.forEach(el => el.classList.remove('cardsSamplesItemActive'));\n      }\n\n      if (input.value.length > 12 && input.value.length < 20) {\n        const result = checkCardNumber(input.value.toString());\n        showMessage(result.mess, result.result);\n        if (result.result) {\n          const img = document.querySelector('.' + result.style);\n          if (img) {\n            img.classList.add('cardsSamplesItemActive');\n          }\n        }\n      } else {\n        showMessage('В номере карты неверное число цифр', false);\n        \n      }\n    });\n  }\n}\n\nfunction showMessage(message, type) {\n  if (timeoutId) {\n    clearTimeout(timeoutId);\n  }\n\n  const messageBox = document.querySelector('.messageBox');\n  messageBox.classList.remove('resultFalsy');\n  messageBox.classList.remove('resultTruthy');\n  if (type) { \n    messageBox.classList.add('resultTruthy');\n  } else {\n    messageBox.classList.add('resultFalsy');\n  }\n\n  messageBox.textContent = message;\n  timeoutId = setTimeout(() => {\n    messageBox.textContent = '';\n  }, 3000)\n}","export function checkCardNumber(num) {\n  let result = false;\n  let mess = '';\n  let style = null;\n\n  if (checkTrueCard(num)) {\n    const substr2 = Number(num.substr(0,2));\n    const substr4 = Number(num.substr(0,4));\n    if (substr2 === 34 || substr2 === 37) {\n      result = true;\n      mess = 'Карта системы American Express';\n      style = 'AmericanExpress';\n    } else if (substr2 > 51 && substr2 < 56) {\n      result = true;\n      mess = 'Карта системы Mastercard';\n      style = 'MasterCard';\n    } else if (substr2 === 36) {\n      result = true;\n      mess = 'Карта системы Diners Club';\n      style = 'DinersClub';\n    } else if (substr4 >= 2200 && substr4 <= 2204) {\n      result = true;\n      mess = 'Карта системы МИР';\n      style = 'MIR';\n    } else if (substr4 > 2220 && substr4 < 2721) {\n      result = true;\n      mess = 'Карта системы Mastercard';\n      style = 'MasterCard';\n    } else if (Number(num.substr(0,1)) === 4) {\n      result = true;\n      mess = 'Карта системы Visa';\n      style = 'Visa';\n    } else if (substr4 >= 3528 && substr4 <= 3589) {\n      result = true;\n      mess = 'Карта системы JCB';\n      style = 'JCB';\n    } else if (substr4 === 6011 || substr2 === 65 || (Number(num.substr(0,3)) >= 644 && Number(num.substr(0,3)) <= 649)) {\n      result = true;\n      mess = 'Карта системы Discover Card';\n      style = 'Discover';\n    } else {\n      result = false;\n      mess = 'Не удалось определить эмитента карты';\n    }\n  } else {\n    result = false;\n    mess = 'Неверный номер карты'\n  }\n  return {result: result, mess: mess, style: style};\n}\n\nexport function checkTrueCard(num) {\n  const numS = num.toString();\n  let sum = 0;\n  const parity = (numS.length) % 2;\n  for (let i = 0; i < numS.length; i += 1) {\n    let digit = Number(numS[i]);\n    if (i % 2 === parity) {\n      digit *= 2;\n      if (digit > 9) {\n        digit -= 9;\n      }\n    }\n    sum += digit;\n  }\n  return Number(sum % 10) === 0;\n}"],"names":["window","addEventListener","root","document","querySelector","cardsBlock","createElement","classList","add","getCardsBlock","cardsBlockHeader","textContent","getCardBlockHeader","cardsSamples","cardsSamplesBlock","system","img","forEach","el","card","cardImg","src","title","append","getCardsSamples","cardsSamplesEntry","cardsSamplesInput","type","name","placeholder","cardsSamplesBtn","getCardsSamplesEntry","messageBox","getMessageBox","input","value","length","substring","addEntringListener","btn","cards","querySelectorAll","remove","result","num","mess","style","numS","toString","sum","parity","i","digit","Number","checkTrueCard","substr2","substr","substr4","checkCardNumber","showMessage","checkCardListener","createCardsBlock","timeoutId","message","clearTimeout","setTimeout"],"sourceRoot":""}